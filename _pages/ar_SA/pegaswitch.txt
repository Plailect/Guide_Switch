---
title: "PegaSwitch"
---

{% include toc title="جدول المحتويات" %}

### يتطلب القراءة

بيج سوتش PegaSwitch هي أداة موجهة للمطورين لاكتشاف الثغرات، وتم تطويرها من قبل فريق ري سوتشد ReSwitched. وهي متوافقة مع التحديثات رقم 1.0.0 إلى 3.0.0.

هذه العدة من الأدوات يستخدم مزيجاً من الثغرات للاستيلاء على المتصفح، إعطاء المستخدم هيكل يمكنه من القراءة/كتابة من و إلى ذاكرة الجهاز، و استخدام الوظائف الأساسية، وخلاف ذلك استكشاف إمكانيات السويتش.

ملاحظة: ثغرة الـ homebrew الحالية لها أعراض جانبية ، وذلك بإفساد قاعدة بيانات الـ Mii لجهازك. في حين أن هذا التأثير غير مؤذي لجهازك، لكنه سيؤدي إلى فقدان أي Miis تم إنشائها من قبل المستخدم.
{: .notice--warning}

### ما تحتاجه

* نظام تشغيل مدعوم
  + نظام ماك MacOS و معظم توزيعات لينكس مدعومين
  + أفضل خيار لمستخدمين ويندوز هو بستخدام [Windows Subsystem for Linux](https://docs.microsoft.com/en-us/windows/wsl/install-win10) distribution
الـ [git](https://git-scm.com/) النسخة الخاضة بنظام تشغيلك
الـ [Node.JS](https://nodejs.org/en/download/package-manager/) مشغل جافا سكربت (أخر أصدار)

### التعليمات

#### القسم الأول - إعدادات شبكة الأنترنت

PegaSwitch تعمل عن طريق استضافة [بوابة محجوزة captive portal] (https://en.wikipedia.org/wiki/Captive_portal) عن طريق تحويل الـ DNS.

من أجل أن تعمل، يجب على جهازك أن يتصل مع حاسبك عن طريق الشبكة.

1. تأكد من أنه لا توجد برامج تستخدم البورتات (البوابات) التالية UDP port 53 أو TCP ports 80 و 8100
  + WSL: أنظر إلى قسم الاستماع للبورتات "Listening Ports" في تبويب شبكة الأتصالات "Network" في `resmon.exe`
  + Linux / MacOS: أنظر للمخرجات من `sudo netstat -tulpn`
1. تأكد من أن الجدارك الناري Firewall لا يحجب الاتصالات القادمة من كل هذه البورتات (البوابات)

#### القسم الثاني - تشغيل PegaSwitch

~~~ bash
# استنتسخ هذا المُستودع
git clone https://github.com/reswitched/pegaswitch

# تثبيت الاعتمادات Dependencies
cd pegaswitch
npm install

# شغل PegaSwitch
# لمستخدمين Windows: ألغى (omit) الـ sudo
sudo node start.js
~~~

# # # القسم الثالث - تعديل الـ DNS

ملاحظة: إعدادات الـ DNS يجب إن تعدل على كل الشبكات المسجل فيها جهازك لتفعيل الثغرة.
{: .notice--info}

1. شغل الإعدادات System Settings في جهازك
1. انتقل إلى الإنترنت `Internet` -> إعدادات الإنترنت `Internet Settings`
1. أختر شبكة الاتصال المتصل فيها حالياً
  + للتأكد أنك متصل بالأنترنت ستجد علامة صح أخضر مقابل شبكة الاتصال الخاصة بك
1. حدد تغيير الإعدادات "Change Settings"
1. عيين الـ "DNS Settings" إلى يدوي "Manual"
1. Set "Primary DNS" and "Secondary DNS" to your PC's IP address
  + This will be displayed in PegaSwitch
1. Save the network settings
1. Return to `Internet Settings`

#### Section IV - Initial Connection

1. انتقل إلى الإنترنت `Internet` -> إعدادات الإنترنت `Internet Settings`
1. أختر شبكة الاتصال المتصل فيها حالياً
1. أختر أتصل بهذه الشبكة "Connect to this Network"
1. إذا كان الاتصال بالـ DNS ناجح، سترى الرسالة التالية "Registration is required to use this network." (وتعني: التسجيل مطلوب لستخدام هذه الشبكة)
1. أختر التالي "Next"
1. صفحة PegaSwitch ستفتح
1. If the exploit was successful, you will now have a PegaSwitch shell connected to your console

#### Section V - Alternative Browser Applets (Optional)

There are actually [multiple](http://switchbrew.org/index.php?title=Internet_Browser#Browser_Applets) internet browsers on the Switch, and any of them can be used to trigger the browser exploit.

While we used the connection test browser applet to initially trigger the exploit, it may be more convenient in the future to use another browser applet.

Triggering the browser exploit using either of these methods will have the same effect as triggering the exploit through the Connection Test method we used before.

##### eShop Sign In Prompt

لاستخدام هذة الطريقة، أصنع حساب ثاني في جهازك. لا تتصل به في حسابك لدى ننتيندو.

1. Launch Nintendo eShop
1. Select the second account
1. Select "Sign In and link"
1. The browser applet will launch

##### Game Update Prompt

To use this method, you must have at least one game on your home screen.

Note that, if you were not connected to the correct DNS servers, this method would *update* your device. It is dangerous!
{: .notice--danger}

1. Press (+) with any game highlighted
1. In the "Software Update" tab, select "Via the Internet"
1. The browser applet will launch

___

You can now easily connect to your device using the PegaSwitch environment.
{: .notice--success}

For debugging purposes, you may want to [enable extra error info](troubleshooting#enable-extra-error-info).
{: .notice--info}

### Return to [Homebrew Development](homebrew-development)
{: .notice--primary}
