---
title: "Homebrew Launcher (PegaSwitch)"
---

{% include toc title="Содержание" %}

### Обязательно к прочтению

Для версий прошивки 1.0.0 - 2.3.0 на данный момент Homebrew Launcher "устанавливается" на вашу консоль при помощи скрипта, запускаемого через [PegaSwitch](https://github.com/ReSwitched/PegaSwitch). 

Homebrew Launcher будет доступен для запуска через приложение Альбом *до следующей перезагрузки*, после чего необходимо *перезапустить скрипт*, чтобы восстановить доступ к Homebrew Launcher. 

После перезагрузки этот вторичный эксплойт необходимо перезапустить, чтобы восстановить доступ к Homebrew Launcher на вашей консоли. Обратите внимание, что этот вторичный эксплойт также не позволяет запускать обычные игры, пока он активирован (*до следующей перезагрузки*).
 
Если вы знакомы с "джейлбрейком" для iOS-устройств, эта идея может считаться аналогичной "привязанному джейлбрейку".

Обратите внимание, что, хотя эти инструкции также подходят для версии прошивки 3.0.0, будет намного проще вместо этого следовать инструкции [Homebrew Launcher (Installer)](homebrew-launcher-(installer)) для этой версии.
{: .notice--info}

### Что понадобится

* **Прошивка 1.0.0:** Версия v1.0.0 [nx-hbmenu](https://github.com/switchbrew/nx-hbmenu/releases/tag/v1.0.0){:target="_blank"} (*последняя версия nx-hbmenu на данный момент падает на 1.0.0*)
* **Прошивка 2.0.0 - 2.3.0:** Свежая версия [nx-hbmenu](https://github.com/switchbrew/nx-hbmenu/releases/latest){:target="_blank"}
* Свежая версия [PegaSwitch](https://github.com/reswitched/PegaSwitch)
* Свежая версия [node.js](https://nodejs.org/en/)
* [hbl.nsp]({{ "/images/hbl.nsp" | absolute_url }}){:download}
* [nsp.js]({{ "/images/nsp.js" | absolute_url }}){:download}

### Инструкция

#### Часть I - Подготовка

1. Выключите консоль
1. Вставьте SD-карту в компьютер
1. Скопируйте файл `hbmenu.nro` из `.zip-архива` nx-hbmenu в корень SD-карты
1. Скопируйте `hbl.nsp` в корень SD-карты
1. Создайте папку `switch` в корне SD-карты, если таковой нет
1. Вставьте SD-карту обратно в консоль
1. Включите консоль

#### Часть II - Конфигурация PegaSwitch
1. После загрузки последней версии PegaSwitch, скопируйте `nsp.js` в папку `PegaSwitch/usefulscripts`
1. Запустите cmd/терминал и перейдите в папку PegaSwitch командой `cd`
1. Выполните `npm install`; эта команда установит node модули, от которых зависит PegaSwitch
1. Запустите PegaSwitch, выполнив команду, соответствующую вашей операционной системе
  + **Linux/macOS:** Выполните `sudo node start.js` и запишите отображаемый IP-адрес
  + **Windows:** Выполните `node start.js` и запишите отображаемый IP-адрес
1. Выйдите из PegaSwitch, дважды нажав Ctrl+C

#### Часть III - Конфигурация DNS

Обратите внимание, что адреса этих DNS серверов должны быть настроены для каждой сети, к которой вы подключаете свою консоль, чтобы эксплойт сработал.
{: .notice--info}

1. Откройте Системные настройки
1. Перейдите в `Интернет` -> `Интернет-настройки`
1. Выберите вашу текущую сеть
  + Она обозначена зелёной галочкой рядом с сетью
1. Выберите "Изменить настройки"
1. Измените "Настройки DNS" на "Вручную"
1. Измените значения полей "Первичный DNS" и "Вторичный DNS" на IP-адрес, отображаемый в PegaSwitch
  + Обычно этот адрес имеет формат `192.168.1.XXX`
1. Сохраните настройки сети
1. Закройте Системные настройки

#### Часть IV - Первая установка

Обратите внимание, что эту часть придется выполнять после каждой перезагрузки, чтобы восстановить доступ к Homebrew Launcher.

##### Опция i - Версия прошивки 1.0.0

Обратите внимание, что эта часть подходит только для консолей с версией прошивки 1.0.0; если ваша версия прошивки 2.0.0 - 2.3.0, переходите к части "Опция ii - Версия прошивки 2.0.0 - 2.3.0" ниже.

Обратите внимание, что версия прошивки 1.0.0 на данный момент требует японскую версию игры Puyo Puyo Tetris S для подключения к PegaSwitch в первый раз. Впоследствии будет доступен альтернативный метод подключения к PegaSwitch.
{: .notice--info}

1. Убедитесь, что файервол не блокирует входящие подключения на UDP порте 53 или TCP портах 80 и 8100
1. Запустите PegaSwitch в cmd/терминале, выполнив команду `sudo node start.js --webapplet`
1. Запустите Puyo Puyo Tetris S на консоли
1. Нажмите A, затем нажмите R
1. Нажмите A, затем нажмите на самый нижний пункт меню с надписью "お問い合わせ先"
1. Нажмите на логотип SEGA в левом нижнем углу; это запустит webapplet и откроет страницу PegaSwitch.
1. PegaSwitch на компьютере должен показать, что ваша консоль подключена, и отобразить ее версию прошивки и MAC-адрес в командной строке.
1. В PegaSwitch на компьютере выполните команду `evalfile usefulscripts/nsp.js`
1. Нажмите кнопку Home, чтобы выйти
1. Запустите приложение Альбом
1. Если эксплойт сработал, запустится Homebrew Launcher

##### Опция ii - Версия прошивки 2.0.0 - 2.3.0

Обратите внимание, что эта часть подходит только для консолей с версией прошивки 2.0.0 - 2.3.0; если ваша версия прошивки 1.0.0, переходите к части "Опция i - Версия прошивки 1.0.0" выше.

1. Запустите PegaSwitch в cmd/терминале, выполнив команду `sudo node start.js` 
1. Перейдите в `Интернет` -> `Интернет-настройки`
1. Выберите вашу текущую сеть
1. Выберите "Подключиться к этой сети"
1. Если соединение с DNS прошло успешно, вы увидите сообщение "Регистрация необходима для использования этой сети."
1. Выберите "Далее"
1. Будет загружена веб-страница PegaSwitch
1. PegaSwitch на компьютере должен показать, что ваша консоль подключена, и отобразить ее версию прошивки и MAC-адрес в командной строке.
1. Выполните команду `evalfile usefulscripts/nsp.js`
1. Нажмите кнопку Home, чтобы выйти
1. Запустите приложение Альбом
1. Если эксплойт сработал, запустится Homebrew Launcher 

#### Часть V - Fake News (Опционально)

Поскольку после каждой перезагрузки необходимо проделывать часть с установкой, идеальным было бы наличие более удобной возможности подключения к PegaSwitch.

К счастью, мы можем установить поддельную запись в приложение Новости (эксплойт "Fake News"), которая сделает подключение к PegaSwitch гораздо проще.

Обратите внимание, что модификация системных сохранений может привести к перманентному **брику** в случае некорректного использования! Настоятельно рекомендуется избегать редактирования скрипта `installFakeNews.js`, чтобы избежать повреждения консоли.
{: .notice--warning}

1. Подключите консоль к PegaSwitch, как написано в Части III
1. После подключения к PegaSwitch выполните команду `evalfile usefulscripts/installFakeNews.js` и дождитесь ее завершения
1. Перезагрузите консоль, и вы должны увидеть запись PegaSwitch в новостях
1. Чтобы воспользоваться Fake News, запустите PegaSwitch на компьютере командой `sudo node start.js --webapplet`, затем выберите запись Fake News в новостях на консоли и откройте "видео"

___


Обратите внимание, что на данный момент хоумбрю находится в ранней стадии с очень малым количеством программ.

Вы можете найти доступные приложения на [switchbrew](http://switchbrew.org/index.php?title=Homebrew_Applications), [/r/SwitchHacks на reddit](https://www.reddit.com/r/SwitchHacks/), или [Switch Homebrew на GBAtemp](https://gbatemp.net/forums/285/).

Для установки приложений хоумбрю просто скопируйте файл `.nro` в папку `/switch/` на SD-карте.

___

Теперь Homebrew Launcher доступен для запуска через приложение Альбом в меню HOME (*до следующей перезагрузки*).
{: .notice--success}

Теперь вы не сможете запускать игры на картриджах или из eShop (*до следующей перезагрузки*).
{: .notice--warning}

После перезагрузки необходимо заново выполнить `evalfile usefulscripts/nsp.js` в PegaSwitch (используя любой браузер-апплет), чтобы восстановить доступ к Homebrew Launcher на вашей консоли.
{: .notice--warning}

Для получения информации по прогрессу в разработке хоумбрю регулярно проверяйте еженедельный блог [ReSwitched Weekly](https://reswitchedweekly.github.io/).
{: .notice--primary}

Для получения информации о внесении своего вклада в хоумбрю в качестве разработчика, перейдите на страницу [Разработка хоумбрю](homebrew-development).
{: .notice--primary}
